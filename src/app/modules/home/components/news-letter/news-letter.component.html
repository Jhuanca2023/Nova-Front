<section
  #newsletterContainer
  class="relative py-16 my-12 rounded-2xl gradient-bg overflow-hidden newsletter-section"
  [class.visible]="isVisible()"
>
  <div class="container mx-auto px-4">
    <div class="text-center">
      <div class="animate-item mail-icon">
        <lucide-angular
          name="mail"
          class="w-12 h-12 mx-auto mb-4 text-primary"
        ></lucide-angular>
      </div>

      <h2 class="mb-2 text-3xl font-bold animate-item title">
        Mantente informado
      </h2>

      <p
        class="max-w-2xl mx-auto mb-8 text-lg text-muted animate-item description"
      >
        Suscríbete a nuestro newsletter y recibe las últimas novedades, ofertas
        exclusivas y consejos tecnológicos directamente en tu bandeja de entrada
      </p>

      <!-- Formulario de suscripción -->
      <form
        #formContainer
        (ngSubmit)="onSubmit()"
        class="animate-item flex flex-col items-center justify-center max-w-md mx-auto space-y-4 md:flex-row md:space-y-0 md:space-x-2 form"
        [class.form-submitted]="isSubmitted()"
      >
        <div class="w-full md:w-auto md:flex-1 relative">
          <input
            type="email"
            [formControl]="emailControl"
            placeholder="Tu correo electrónico"
            class="w-full py-2 px-4 border border-base-300 rounded-lg bg-base-100 focus:border-primary focus:ring focus:ring-primary-focus focus:ring-opacity-30"
            [class.input-error]="emailControl.invalid && emailControl.touched"
          />

          <!-- Mensajes de error usando el nuevo control flow -->
          @if (emailControl.invalid && emailControl.touched) {
          <div class="text-error text-xs mt-1 text-left">
            @if (emailControl.hasError('required')) {
            <span>El correo electrónico es requerido</span>
            } @else if (emailControl.hasError('email')) {
            <span>Por favor, ingresa un correo electrónico válido</span>
            }
          </div>
          }
        </div>

        <button
          type="submit"
          class="btn btn-primary w-full md:w-auto submit-button"
          [disabled]="isSubmitted()"
          [class.success]="isSubmitted()"
        >
          @if (isSubmitted()) {
          <div class="flex items-center">
            <lucide-angular name="check" class="w-4 h-4 mr-2"></lucide-angular>
            <span>¡Suscrito!</span>
          </div>
          } @else {
          <span>Suscribirse</span>
          }
        </button>
      </form>

      <p class="mt-4 text-sm text-muted animate-item privacy-text">
        Respetamos tu privacidad. Puedes darte de baja en cualquier momento.
      </p>
    </div>
  </div>

  <div class="absolute top-0 left-0 w-full h-full -z-10 overflow-hidden">
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    <div class="blob blob-3"></div>
  </div>
</section>
