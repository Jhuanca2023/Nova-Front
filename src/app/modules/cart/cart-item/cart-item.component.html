<div
  class="flex py-4 border-b last:border-0 item-container"
  [class.updating]="isUpdating"
>
  <!-- Imagen del producto -->
  <div
    class="relative w-20 h-20 mr-4 overflow-hidden bg-base-200 rounded shadow-sm"
  >
    <img
      [src]="item.imageUrl || '/assets/images/placeholder.png'"
      [alt]="item.productName"
      class="object-contain w-full h-full"
    />

    <!-- Indicador de actualizaci贸n -->
    @if (isUpdating) {
    <div
      class="absolute inset-0 bg-base-100 bg-opacity-50 flex items-center justify-center"
    >
      <span class="loading loading-spinner loading-xs text-primary"></span>
    </div>
    }
  </div>

  <!-- Informaci贸n del producto -->
  <div class="flex flex-col flex-1">
    <div class="flex flex-col justify-between">
      <a
        [routerLink]="['/products', item.productId]"
        class="hover:text-primary transition-colors duration-200"
      >
        <h3 class="font-medium">{{ item.productName }}</h3>
      </a>
      <p class="font-semibold text-primary">
        {{ item.subtotal | currencyPEN }}
      </p>
    </div>

    <p class="mt-1 text-sm text-base-content/70">
      {{ item.unitPrice | currencyPEN }} / unidad
    </p>

    <!-- Controles de cantidad y bot贸n eliminar -->
    <div class="flex items-center justify-between mt-auto">
      <!-- Control de cantidad -->
      <div class="flex items-center border rounded">
        <button
          class="btn btn-xs btn-ghost quantity-btn"
          [disabled]="item.quantity <= 1 || isUpdating"
          (click)="decrementQuantity()"
        >
          <lucide-angular name="minus" class="w-3 h-3"></lucide-angular>
        </button>

        <span class="w-8 text-center">
          @if (isUpdating) {
          <span class="loading loading-spinner loading-xs text-primary"></span>
          } @else {
          {{ item.quantity }}
          }
        </span>

        <button
          class="btn btn-xs btn-ghost quantity-btn"
          [disabled]="hasReachedMaxStock() || isUpdating"
          (click)="incrementQuantity()"
        >
          <lucide-angular name="plus" class="w-3 h-3"></lucide-angular>
        </button>
      </div>

      <!-- Bot贸n eliminar -->
      <button
        class="btn btn-error btn-sm text-error remove-btn"
        [disabled]="isUpdating"
        (click)="remove()"
      >
        <lucide-angular name="trash-2" class="w-4 h-4"></lucide-angular>
      </button>
    </div>
  </div>
</div>
