<nav class="bg-base-100 border-b border-base-300 sticky top-0 z-10 shadow-sm">
  <div class="container flex items-center justify-between h-16 px-4">
    <!-- Left section: Breadcrumb / Title -->
    <div class="flex items-center">
      <h2 class="text-lg font-semibold page-title">
        {{ getCurrentPageTitle() }}
      </h2>
      <div class="hidden md:flex ml-4 text-sm breadcrumbs">
        <ul>
          <li class="text-base-content/70">Admin</li>
          <li>{{ getCurrentPageTitle() }}</li>
        </ul>
      </div>
    </div>

    <div class="flex items-center gap-3">
     
      <div class="dropdown dropdown-end">
        <div
          tabindex="0"
          class="flex items-center cursor-pointer hover:opacity-80 transition-opacity"
        >
          <div class="avatar placeholder">
            <!-- Use user's avatar if available, otherwise show initials -->
            @if (userService.hasAvatar()) {
              <div class="w-8 h-8 rounded-full">
                <img
                  [src]="userService.getUserAvatar()"
                  alt="User Avatar"
                  (error)="userService.setAvatarLoadError()"
                  class="w-full h-full object-cover"
                />
              </div>
            } @else {
              <div
                class="w-8 h-8 rounded-full flex items-center justify-center"
                [ngClass]="userService.getAvatarBackground()"
              >
                <span>{{ userService.userInitials() }}</span>
              </div>
            }
          </div>
          <div class="hidden md:block ml-2">
            <p class="text-sm font-medium">{{ userService.userName() }}</p>
            <p class="text-xs text-muted-foreground">{{ authService.user()?.email || '' }}</p>
          </div>
          <lucide-angular
            [img]="ChevronDownIcon"
            class="w-4 h-4 ml-1"
          ></lucide-angular>
        </div>

        <ul
          tabindex="0"
          class="dropdown-content z-50 menu p-2 shadow bg-base-100 rounded-box w-52 mt-4"
        >
          <li>
            <a routerLink="/user/perfil">
              <lucide-angular [img]="UserIcon" class="w-4 h-4"></lucide-angular>
              Mi Perfil
            </a>
          </li>
          <li>
            <a (click)="toggleTheme()">
              <lucide-angular
                [img]="isDarkMode() ? SunIcon : MoonIcon"
                class="w-4 h-4"
              ></lucide-angular>
              Cambiar tema
            </a>
          </li>
          <li>
            <a [routerLink]="['/']">
              <lucide-angular
                [img]="StoreIcon"
                class="w-4 h-4"
              ></lucide-angular>
              Ir a tienda
            </a>
          </li>
          <li class="border-t mt-2 pt-2">
            <a class="text-error" (click)="logout()">
              <lucide-angular
                [img]="LogOutIcon"
                class="w-4 h-4"
              ></lucide-angular>
              Cerrar sesi√≥n
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>
